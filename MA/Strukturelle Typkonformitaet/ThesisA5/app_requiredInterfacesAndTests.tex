\chapter{Interfaces und Test-Implementierungen}\label{app_interfacesAndTests}
Im Folgenden werden zum einen die \Gls{Interface}s, die sich aus den Deklarationen der \emph{required Typen} aus dem Anhang \ref{app_evalTypes} ableiten lassen, aufgeführt. Zum anderen werden die Implementierungen der Testklassen, auf die die oben genannten \Gls{Interface}s über die Annotation $\texttt{RequiredTypeTestReference}$ verweisen, dargelegt. 
\\\\
Die Listings \ref{lst_interfaces_tei1} - \ref{lst_interfaces_tei7} zeigen dabei die Deklarationen der Java-\Gls{Interface}s\footnote{Auf die Import-Anweisungen wurde verzichtet.} für die \emph{required Typen} aus Tabelle \ref{tab:eIShort} aus Kapitel \ref{chap_evaluation}.
\begin{lstlisting}[style = java, caption = Interface ElerFTFoerderprogrammeProvider, captionpos = b, label = lst_interfaces_tei1]
@RequiredTypeTestReference( testClasses = ElerFTFoerderprogrammProviderTest.class )
public interface ElerFTFoerderprogrammeProvider {

 Collection<ElerFTFoerderprogramm> getAlleFreigegebenenFPs();
 
 ElerFTFoerderprogramm getElerFTFoerderprogramm( DvAntragsJahr jahr, DvFoerderprogramm fp, Date date );
  
}
\end{lstlisting}
\pagebreak
\begin{lstlisting}[style = java, caption = Interface FoerderprogrammeProvider, captionpos = b, label = lst_interfaces_tei2]
@RequiredTypeTestReference( testClasses = FoerderprogrammProviderTest.class )
public interface FoerderprogrammeProvider {

 Collection<Foerderprogramm> getAlleFreigegebenenFPs();
 
 Foerderprogramm getFoerderprogramm( DvFoerderprogramm fp, DvAntragsJahr jahr, Date date );
   
}
\end{lstlisting}
\begin{lstlisting}[style = java, caption = Interface MinimalFoerderprogrammeProvider, captionpos = b, label = lst_interfaces_tei3]
@RequiredTypeTestReference( testClasses = MinimalFoerderprogrammProviderTest.class )
public interface MinimalFoerderprogrammeProvider {

 Collection<String> getAlleFreigegebenenFPs();

 Foerderprogramm getFoerderprogramm( String fp, int jahr, Date date );
  
}
\end{lstlisting}
\begin{lstlisting}[style = java, caption = Interface IntubatingFireFighter, captionpos = b, label = lst_interfaces_tei4]
@RequiredTypeTestReference( testClasses = IntubatingFireFighterTest.class )
public interface IntubatingFireFighter {

 void intubate( Injured injured );

 FireState extinguishFire( Fire fire );
  
}
\end{lstlisting}
\pagebreak
\begin{lstlisting}[style = java, caption = Interface IntubatingFreeing, captionpos = b, label = lst_interfaces_tei5]
@RequiredTypeTestReference( testClasses = IntubatingFreeingTest.class )
public interface IntubatingFreeing {

 void intubate( Injured injured );

 void free( Injured injured );
  
}
\end{lstlisting}
\begin{lstlisting}[style = java, caption = Interface IntubatingPatientFireFighter, captionpos = b, label = lst_interfaces_tei6]
@RequiredTypeTestReference( testClasses = IntubatingPatientFireFighterTest.class )
public interface IntubatingPatientFireFighter {

 void intubate( IntubationPartient patient );

 FireState extinguishFire( Fire fire );
  
}
\end{lstlisting}
\begin{lstlisting}[style = java, caption = Interface KOFGPCProvider, captionpos = b, label = lst_interfaces_tei7]
@RequiredTypeTestReference( testClasses = KOFGPCProviderTest.class )
public interface KOFGPCProvider {

 Collection<ElerFTKoFoerdergegenstand> getKOFGsVonFP( DvFoerderprogramm fp );
 
 Collection<Produktcode> getPCsZuKOFG( DvFoerdergegenstand fg, DvAntragsJahr aj ); 
  
}
\end{lstlisting}
Zu erkennen ist, dass jedes \Gls{Interface}s, wie in Abschnitt \ref{sec_Impl_CT} beschrieben, mit der Annotation $\texttt{RequiredTypeTestReference}$ versehen ist, über die auf eine Java-Klasse verwiesen wird, in der die Tests zu dem jeweiligen \emph{required Typ} implementiert sind.
\\\\
Die Listings \ref{lst_testklassen_tei1} - \ref{lst_testklassen_tei7} zeigen die Implementierungen dieser Testklassen\footnote{Auf die Import-Anweisungen wurde verzichtet.}. Um die Methoden aus dem \Gls{Interface} \texttt{TriedMethodCallsInfo}, über das die für die \Gls{Heuristik} \emph{BL\_NMC} benötigten Informationen (siehe Abschnitt \ref{sec_bl_nmc}) ermittelt werden, nicht jedes mal neu implementieren zu müssen, wurde eine gemeinsame Oberklasse für die Testimplementierungen geschaffen (siehe Listing \ref{lst_supertest}).
\pagebreak
\begin{lstlisting}[style = java, caption = Oberklasse für die Testklassen, captionpos = b, label = lst_supertest]
public abstract class AbstractTest implements TriedMethodCallsInfo {

 private Collection<Method> calledMethods = new ArrayList<Method>();

 @Override
 public void addTriedMethodCall( Method method ) {
  calledMethods.add( method );
 }

 @Override
 public Collection<Method> getTriedMethodCalls() {
  return calledMethods;
 }
}
\end{lstlisting}
\pagebreak
\begin{lstlisting}[style = java, caption = Interface ElerFTFoerderprogrammProviderTest, captionpos = b, label = lst_testklassen_tei1]
public class ElerFTFoerderprogrammProviderTest extends AbstractTest {

 private ElerFTFoerderprogrammeProvider provider;
  
 @RequiredTypeInstanceSetter
 public void setProvider( ElerFTFoerderprogrammeProvider provider ) {
  this.provider = provider;
 }

 @RequiredTypeTest
 public void testEmptyCollection() {
  addTriedMethodCall( getMethod( "getAlleFreigegebenenFPs", ElerFTFoerderprogrammeProvider.class ) );
  Collection<ElerFTFoerderprogramm> alleFreigegebenenFPs = provider.getAlleFreigegebenenFPs();
  assertThat( alleFreigegebenenFPs, notNullValue() );
 }

 @RequiredTypeTest
 public void testMockedFPCollection() {
  DvFoerderprogramm fp = DvFoerderprogramm.Factory.valueOf( DvFoerderprogramm.FP215 );
  addTriedMethodCall( getMethod( "getElerFTFoerderprogramm", ElerFTFoerderprogrammeProvider.class ) );
  ElerFTFoerderprogramm alleFreigegebenenFPs = provider.getElerFTFoerderprogramm( DvAntragsJahr.AJ2020, fp, new Date() );
  assertThat( alleFreigegebenenFPs, nullValue() );
 }
}
\end{lstlisting}
\pagebreak
\begin{lstlisting}[style = java, caption = Interface FoerderprogrammProviderTest, captionpos = b, label = lst_testklassen_tei2]
public class FoerderprogrammProviderTest extends AbstractTest {

 private FoerderprogrammeProvider provider;

 @RequiredTypeInstanceSetter
 public void setProvider( FoerderprogrammeProvider provider ) {
  this.provider = provider;
 }

 @RequiredTypeTest
 public void testEmptyCollection() {
  addTriedMethodCall( getMethod( "getAlleFreigegebenenFPs", provider.getClass()) );
  Collection<Foerderprogramm> alleFreigegebenenFPs = provider.getAlleFreigegebenenFPs();
  assertThat( alleFreigegebenenFPs, notNullValue() );
 }

 @RequiredTypeTest
 public void testMockedFPCollection() {
  addTriedMethodCall( getMethod( "getFoerderprogramm", provider.getClass()) );
  Foerderprogramm relevantFP = provider.getFoerderprogramm( DvFoerderprogramm.FP508, DvAntragsJahr.AJ2020, new Date() );
  assertThat( relevantFP, notNullValue() );
 }

 @RequiredTypeTest
 public void testDZFPCollection() {
  addTriedMethodCall( getMethod( "getFoerderprogramm", provider.getClass() ) );
  Foerderprogramm relevantFP = provider.getFoerderprogramm( DvFoerderprogramm.FP215, DvAntragsJahr.AJ2020, new Date() );
  assertThat( relevantFP, notNullValue() );
 }
}
\end{lstlisting}
\pagebreak
\begin{lstlisting}[style = java, caption = Interface MinimalFoerderprogrammProviderTest, captionpos = b, label = lst_testklassen_tei3]
public class MinimalFoerderprogrammProviderTest extends AbstractTest {

 private MinimalFoerderprogrammeProvider provider;
 
 @RequiredTypeInstanceSetter
 public void setProvider( MinimalFoerderprogrammeProvider provider ) {
  this.provider = provider;
 }

 @RequiredTypeTest
 public void testEmptyCollection() {
  addTriedMethodCall( getMethod( "getAlleFreigegebenenFPs", provider.getClass()) );
  Collection<String> alleFreigegebenenFPs = provider.getAlleFreigegebenenFPs();
  assertThat( alleFreigegebenenFPs, notNullValue() );
 }

 @RequiredTypeTest
 public void testGetFoerderprogramm() {
  addTriedMethodCall( getMethod( "getFoerderprogramm", provider.getClass()) );
  Foerderprogramm fp = provider.getFoerderprogramm( "215", 2015, new Date() );
  assertThat( fp, notNullValue() );
  DvFoerderprogramm dvFP = fp.getFoerderprogramm();
  assertThat( dvFP, notNullValue() );
  String code = dvFP.getCode();
  assertThat( fpCode, equalTo( code ) );
 }
}
\end{lstlisting}
\pagebreak
\begin{lstlisting}[style = java, caption = Interface IntubatingFireFighterTest, captionpos = b, label = lst_testklassen_tei4]
public class IntubatingFireFighterTest extends AbstractTest {

 private IntubatingFireFighter intubatingFireFighter;
 
 @RequiredTypeInstanceSetter
 public void setProvider(IntubatingFireFighter intubatingFireFighter) {
  this.intubatingFireFighter = intubatingFireFighter;
 }

 @RequiredTypeTest
 public void free() {
  Fire fire = new Fire();
  addTriedMethodCall(getMethod("extinguishFire", IntubatingFireFighter.class));
  FireState fireState = intubatingFireFighter.extinguishFire(fire);
  assertTrue(Objects.equals(fireState.isActive(), fire.isActive()));
  assertFalse(fire.isActive());
 }

 @RequiredTypeTest
 public void intubate() {
  Collection<Suffer> suffer = Arrays.asList(Suffer.BREATH_PROBLEMS);
  Injured patient = new Injured(suffer);
  addTriedMethodCall(getMethod("intubate", IntubatingFireFighter.class));
  intubatingFireFighter.intubate(patient);
  assertTrue(patient.isStabilized());
 }
}
\end{lstlisting}
\pagebreak
\begin{lstlisting}[style = java, caption = Interface IntubatingFreeingTest, captionpos = b, label = lst_testklassen_tei5]
public class IntubatingFreeingTest extends AbstractTest {

 private IntubatingFreeing intubatingFreeing;

 @RequiredTypeInstanceSetter
 public void setProvider(IntubatingFreeing intubatingFireFighter) {
  this.intubatingFreeing = intubatingFireFighter;
 }

 @RequiredTypeTest
 public void free() {
  Collection<Suffer> suffer = Arrays.asList(Suffer.LOCKED);
  Injured patient = new Injured(suffer);
  addTriedMethodCall(getMethod("free", IntubatingFreeing.class));
  intubatingFreeing.free(patient);
  assertTrue(patient.isStabilized());
 }

 @RequiredTypeTest
 public void intubate() {
  Collection<Suffer> suffer = Arrays.asList(Suffer.BREATH_PROBLEMS);
  Injured patient = new Injured(suffer);
  addTriedMethodCall(getMethod("intubate", IntubatingFreeing.class));
  intubatingFreeing.intubate(patient);
  assertTrue(patient.isStabilized());
 }
}
\end{lstlisting}
\pagebreak
\begin{lstlisting}[style = java, caption = Interface IntubatingPatientFireFighterTest, captionpos = b, label = lst_testklassen_tei6]
public class IntubatingPatientFireFighterTest extends AbstractTest {

 private IntubatingPatientFireFighter intubatingPatientFireFighter;

 @RequiredTypeInstanceSetter
 public void setProvider(IntubatingPatientFireFighter intubatingFireFighter) {
  this.intubatingPatientFireFighter = intubatingFireFighter;
 }

 @RequiredTypeTest
 public void extinguishFire() {
  Fire fire = new Fire();
  addTriedMethodCall(getMethod("extinguishFire", IntubatingPatientFireFighter.class));
  FireState fireState = intubatingPatientFireFighter.extinguishFire(fire);
  assertTrue(Objects.equals(fireState.isActive(), fire.isActive()));
  assertFalse(fire.isActive());
 }

 @RequiredTypeTest
 public void intubate() {
  IntubationPartient patient = new IntubationPartient();
  addTriedMethodCall(getMethod("intubate", IntubatingPatientFireFighter.class));
  intubatingPatientFireFighter.intubate(patient);
  assertTrue(patient.isIntubated());
 }
}
\end{lstlisting}
\pagebreak
\begin{lstlisting}[style = java, caption = Interface KOFGPCProviderTest, captionpos = b, label = lst_testklassen_tei7]
public class KOFGPCProviderTest extends AbstractTest {

 private KOFGPCProvider provider;

 @RequiredTypeInstanceSetter
 public void setProvider( KOFGPCProvider provider ) {
  this.provider = provider;
 }

 @RequiredTypeTest
 public void testKOFGsCollection() {
  DvFoerderprogramm fp = DvFoerderprogramm.Factory.valueOf( DvFoerderprogramm.FP508 );
  addTriedMethodCall( getMethod( "getKOFGsVonFP", KOFGPCProvider.class ) );
  Collection<ElerFTKoFoerdergegenstand> kofGsVonFP = provider.getKOFGsVonFP( fp );
  assertThat( kofGsVonFP, notNullValue() );
  assertThat( kofGsVonFP.isEmpty(), equalTo( false ) );
  assertThat( kofGsVonFP.stream().anyMatch( fg -> fg.getCode().equals( "KO508" ) ), equalTo( true ) );
 }

 @RequiredTypeTest
 public void testPCsCollection() {
  DvFoerdergegenstand fg = DvFoerdergegenstand.Factory.valueOf( 20155080025L );
  addTriedMethodCall( getMethod( "getPCsZuKOFG", KOFGPCProvider.class ) );
  Collection<Produktcode> pcs = provider.getPCsZuKOFG( fg, DvAntragsJahr.AJ2020 );
  assertThat( pcs, notNullValue() );
  assertThat( pcs.isEmpty(), equalTo( false ) );
 }
}
\end{lstlisting}
\noindent
