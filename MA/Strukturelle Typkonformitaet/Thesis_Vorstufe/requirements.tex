\section{Voraussetzungen}
Die erste Voraussetzung bezieht sich auf die Spezifikation der Erwartungen einer nachfragenden Komponente. Diese soll aus zwei Teilen bestehen.
\subsection{Erwartete Syntax}
Der erste Teil soll die Struktur der erwarteten Informationen bzw. Services beschreiben. Der Entwickler soll hierzu die Schnittstelle, die von ihm erwartet wird in der Form beschreiben, wie es in dem vorliegenden System üblich ist. In dem konkreten System, von dem in dieser Arbeit ausgegangen wird, handelt es sich dabei um Java-Interfaces. Die Struktur der erwarteten Informationen bzw. Services wird demnach innerhalb der nachfragenden Komponente durch ein Interface dargestellt, in dem die erwarteten Methoden, die innerhalb der nachfragenden Komponente verwendet werden sollen, deklariert wurden. Ein solches Interface wird im Folgenden auch als erwartetes Interface bezeichnet.
\subsection{Erwartete Semantik}
Der zweite Teil besteht aus einer Menge von Testfällen, durch die ein Teil der erwarteten Semantik spezifiziert wird. Hierzu können Testfälle in Methoden mehrerer Klassen implementiert werden. Zur Referenzierung der Testklassen wird eine Annotation @QueryTypeTestReference im erwarteten Interface verwendet. Dort können über den Parameter testClasses mehrere Testklassen angegeben werden. Die Testklassen müssen über den Default-Konstruktor verfügen. Innerhalb der Testklassen werden die Testmethoden mit der Annotation @QueryTest markiert. Weiterhin ist es notwendig, die zu testende Instanz zur Laufzeit in ein Objekt einer Testklasse zu injizieren. Dies erfolgt durch Setter-Injection. Aus diesem Grund muss in jeder Testklasse ein Setter für ein Objekt vom Typ des erwarteten Interfaces implementiert werden und mit der Annotation @QueryTypeInstanceSetter markiert werden.\\\\
\lstref{LST_IntubationFireFighter} zeigt ein Beispiel für ein erwartetes Interface, welches eine Testklasse referenziert. \lstref{LST_IntubationFireFighterTest} hingegen zeigt diese referenzierte Testklasse mit den bereits erwähnten Annotationen für den Setter des zu testenden Objektes und den Testmethoden.
\begin{lstlisting}[{caption = Erwartetes Interface IntubatingFireFighter
},{label = LST_IntubationFireFighter}]
@QueryTypeTestReference( testClasses = IntubatingFireFighterTest.class )
public interface IntubatingFireFighter {

  public void intubate( AccidentParticipant injured );

  public void extinguishFire( Fire fire );
}
\end{lstlisting}
\begin{lstlisting}[{caption = Testklasse des erwarteten Interfaces IntubatingFireFighter
},{label = LST_IntubationFireFighterTest}]
public class IntubatingFireFighterTest {

  private IntubatingFireFighter intubatingFireFighter;

  @QueryTypeInstanceSetter
  public void setProvider( IntubatingFireFighter intubatingFireFighter ) {
    this.intubatingFireFighter = intubatingFireFighter;
  }

  @QueryTypeTest
  public void free() {
    Fire fire = new Fire();
    intubatingFireFighter.extinguishFire( fire );
    assertFalse( fire.isActive() );
  }

  @QueryTypeTest
  public void intubate() {
    Collection<Suffer> suffer = Arrays.asList( Suffer.BREATH_PROBLEMS );
    AccidentParticipant patient = new AccidentParticipant( suffer );
    intubatingFireFighter.intubate( patient );
    assertTrue( patient.isStabilized() );
  }
}
\end{lstlisting}
\subsection{Ermittlung angebotener Komponenten}
Die zweite Voraussetzung betrifft den Zugang zu den bestehenden angebotenen Schnittstellen und deren Implementierungen in dem bestehenden System. Um in der Menge aller angebotenen Komponenten eine passende Komponente finden zu können, muss diese Menge bekannt sein oder ermittelt werden können. Wie oben beschrieben, wird in dieser Arbeit von einem System ausgegangen, in dem die angebotenen Komponenten als Java Enterprise Beans umgesetzt wurden. So wird dementsprechend eine Möglichkeit geschaffen, sämtliche der angemeldeten JNDI-Namen und die dazugehörigen Bean-Interfaces abzufragen. Die Abfrage der angemeldeten Bean-Implementierungen zu einem JNDI-Namen ist durch den EJB-Container bei Vorliegen des entsprechenden Interfaces und des JNDI-Namens bereits gegeben.